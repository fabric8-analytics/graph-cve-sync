FROM registry.centos.org/centos/centos:7

RUN yum install -y epel-release &&\
    yum install -y git python36-pip python36-devel &&\
    yum clean all

ENV APP_DIR=/graph-cve-sync \
    GIT_COMMITTER_NAME=graph-cve-sync \
    GIT_COMMITTER_EMAIL=graph-cve-sync@example.com

RUN mkdir -p ${APP_DIR}
WORKDIR ${APP_DIR}

COPY . ${APP_DIR}
RUN pip3 install --upgrade pip
RUN pip3 install -r requirements.txt --upgrade

CMD ["python3", "./graph_cve_sync.py"]
